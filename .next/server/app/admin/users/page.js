(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1267:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(7459),s(9457),s(6666),s(2029),s(2523);var t=s(3191),a=s(8716),n=s(7922),i=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7459)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,6666)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\page.tsx"],u="/admin/users/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6774:(e,r,s)=>{Promise.resolve().then(s.bind(s,9505))},2881:(e,r,s)=>{"use strict";s.d(r,{Z:()=>u});var t=s(7577);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase()),i=e=>{let r=n(e);return r.charAt(0).toUpperCase()+r.slice(1)},o=(...e)=>e.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim(),l=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:c,...u},m)=>(0,t.createElement)("svg",{ref:m,...d,width:r,height:r,stroke:e,strokeWidth:a?24*Number(s)/Number(r):s,className:o("lucide",n),...!i&&!l(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(i)?i:[i]])),u=(e,r)=>{let s=(0,t.forwardRef)(({className:s,...n},l)=>(0,t.createElement)(c,{ref:l,iconNode:r,className:o(`lucide-${a(i(e))}`,`lucide-${e}`,s),...n}));return s.displayName=i(e),s}},434:(e,r,s)=>{"use strict";s.d(r,{default:()=>a.a});var t=s(9404),a=s.n(t)},5047:(e,r,s)=>{"use strict";var t=s(7389);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},9505:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l});var t=s(326),a=s(7577),n=s(5329),i=s(9837),o=s(9175);function l(){let[e,r]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1);async function x(){try{let e=await fetch("/api/admin/users"),s=await e.json(),t=Array.isArray(s)?s:s.users||[];r(t)}catch(e){console.error("Failed to fetch users:",e)}finally{l(!1)}}async function b(e){if(d&&u){p(!0);try{let r=await fetch(`/api/admin/users/${d.id}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:e,amount:parseFloat(u)})}),s=await r.json();if(!r.ok)throw Error(s.error||"Update failed");alert(`Successfully ${"add"===e?"added":"deducted"} $${u}`),m(""),c(null),x()}catch(e){alert(e.message)}finally{p(!1)}}}return s?t.jsx("div",{className:"p-6 text-white",children:"Loading users..."}):(0,t.jsxs)("div",{className:"p-6 relative",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"User Management"}),t.jsx("div",{className:"grid gap-4",children:e.length>0?e.map(e=>(0,t.jsxs)(n.Z,{className:"p-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-bold text-white text-lg",children:e.name||"Unnamed"}),"admin"===e.role&&t.jsx("span",{className:"bg-purple-500/20 text-purple-400 text-xs px-2 py-0.5 rounded",children:"Admin"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:e.email}),t.jsx("div",{className:"mt-2 flex items-center gap-4",children:(0,t.jsxs)("p",{className:"text-green-400 font-mono",children:["Bal: $",e.portfolioBalance?.toLocaleString()||"0.00"]})})]}),t.jsx(i.Z,{onClick:()=>c(e),className:"bg-blue-600 hover:bg-blue-500 text-sm",children:"Manage Balance"})]},e.id||e._id)):t.jsx("p",{className:"text-gray-400",children:"No users found."})}),d&&t.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 p-6 rounded-2xl w-full max-w-md shadow-2xl",children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Manage Funds"}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm mb-6",children:["Updating balance for ",t.jsx("span",{className:"text-white",children:d.email})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm text-gray-400",children:"Amount ($)"}),t.jsx(o.Z,{type:"number",placeholder:"0.00",value:u,onChange:e=>m(e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[t.jsx(i.Z,{onClick:()=>b("add"),disabled:h,className:"bg-green-600 hover:bg-green-500",children:"+ Deposit"}),t.jsx(i.Z,{onClick:()=>b("subtract"),disabled:h,className:"bg-red-600 hover:bg-red-500",children:"- Withdraw"})]}),t.jsx(i.Z,{onClick:()=>{c(null),m("")},className:"w-full mt-2 bg-transparent hover:bg-white/5 text-gray-400",children:"Cancel"})]})]})})]})}},9837:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var t=s(326),a=s(1135);function n({className:e,variant:r="primary",loading:s,disabled:n,children:i,...o}){return t.jsx("button",{disabled:s||n,className:(0,a.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===r&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===r&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===r&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===r&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(s||n)&&"opacity-50 cursor-not-allowed",e),...o,children:s?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):i})}},5329:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var t=s(326);s(7577);var a=s(1135);let n=({children:e,className:r})=>t.jsx("div",{className:(0,a.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",r),children:e})},9175:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});var t=s(326);function a({label:e,className:r="",...s}){return(0,t.jsxs)("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-xs font-medium text-gray-400 ml-1",children:e}),t.jsx("input",{className:`w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ${r}`,...s})]})}},7459:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\src\app\admin\users\page.tsx#default`)},1135:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=function(){for(var e,r,s=0,t="",a=arguments.length;s<a;s++)(e=arguments[s])&&(r=function e(r){var s,t,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r)){var n=r.length;for(s=0;s<n;s++)r[s]&&(t=e(r[s]))&&(a&&(a+=" "),a+=t)}else for(t in r)r[t]&&(a&&(a+=" "),a+=t)}return a}(e))&&(t&&(t+=" "),t+=r);return t}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[9276,6779,8282],()=>s(1267));module.exports=t})();