(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1267:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(7459),s(9457),s(6666),s(2029),s(2523);var r=s(3191),a=s(8716),l=s(7922),n=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7459)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,6666)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\page.tsx"],u="/admin/users/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6774:(e,t,s)=>{Promise.resolve().then(s.bind(s,9505))},2881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(7577);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:n,iconNode:c,...u},x)=>(0,r.createElement)("svg",{ref:x,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:i("lucide",l),...!n&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...l},o)=>(0,r.createElement)(c,{ref:o,iconNode:t,className:i(`lucide-${a(n(e))}`,`lucide-${e}`,s),...l}));return s.displayName=n(e),s}},434:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(9404),a=s.n(r)},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},9505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),a=s(7577),l=s(5329),n=s(9837),i=s(9175);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,x]=(0,a.useState)("details"),[m,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[w,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1);async function N(){try{let e=await fetch("/api/admin/users"),s=await e.json(),r=Array.isArray(s)?s:s.users||[];t(r)}catch(e){console.error("Failed to fetch users:",e)}finally{o(!1)}}async function k(e){if(d&&m){v(!0),y(null);try{if(!(await fetch(`/api/admin/users/${d.id}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:e,amount:parseFloat(m)})})).ok)throw Error("Update failed");y({type:"success",text:`Successfully ${"add"===e?"added":"deducted"} $${m}`}),h(""),N()}catch(e){y({type:"error",text:"Failed to update balance"})}finally{v(!1)}}}async function C(e){if(e.preventDefault(),d&&g){v(!0);try{if(!(await fetch("/api/admin/users/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.id,title:p,message:g})})).ok)throw Error("Failed to send");y({type:"success",text:"Message sent to user dashboard."}),b(""),f("")}catch(e){y({type:"error",text:"Could not send message."})}finally{v(!1)}}}return s?r.jsx("div",{className:"p-6 text-white",children:"Loading users..."}):(0,r.jsxs)("div",{className:"p-6 relative min-h-screen",children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"User Management"}),r.jsx("div",{className:"grid gap-4",children:e.map(e=>(0,r.jsxs)(l.Z,{className:"p-4 flex flex-col md:flex-row justify-between items-center gap-4 hover:border-blue-500/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-bold text-white text-lg",children:e.name||"Unnamed"}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${"admin"===e.role?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:e.role})]}),r.jsx("p",{className:"text-sm text-gray-400",children:e.email})]}),r.jsx(n.Z,{onClick:()=>{c(e),x("details")},className:"bg-gray-700 hover:bg-gray-600",children:"Manage User"})]},e.id))}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row h-[500px]",children:[(0,r.jsxs)("div",{className:"w-full md:w-1/3 bg-white/5 p-4 flex flex-col gap-2 border-r border-white/10",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"font-bold text-white truncate",children:d.name}),r.jsx("p",{className:"text-xs text-gray-400 truncate",children:d.email})]}),r.jsx("button",{onClick:()=>x("details"),className:`p-3 rounded-lg text-left text-sm font-medium transition-colors ${"details"===u?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"}`,children:"User Details"}),r.jsx("button",{onClick:()=>x("wallet"),className:`p-3 rounded-lg text-left text-sm font-medium transition-colors ${"wallet"===u?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"}`,children:"Wallet & Balance"}),r.jsx("button",{onClick:()=>x("message"),className:`p-3 rounded-lg text-left text-sm font-medium transition-colors ${"message"===u?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"}`,children:"Send Message"})]}),(0,r.jsxs)("div",{className:"flex-1 p-6 relative bg-[#1a1f2e] overflow-y-auto",children:[r.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"âœ•"}),w&&r.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm font-medium ${"success"===w.type?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:w.text}),"details"===u&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Profile Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"User ID"}),r.jsx("p",{className:"text-sm text-gray-300 font-mono truncate",children:d.id})]}),(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Role"}),r.jsx("p",{className:"text-sm text-gray-300 capitalize",children:d.role})]}),(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg col-span-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-300",children:d.email})]}),(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg col-span-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Current Balance"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["$",d.portfolioBalance?.toLocaleString()||"0.00"]})]})]})]}),"wallet"===u&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Adjust Wallet Balance"}),(0,r.jsxs)("div",{className:"p-4 bg-black/20 rounded-xl mb-6",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Current Balance"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",d.portfolioBalance?.toLocaleString()||"0"]})]}),r.jsx(i.Z,{label:"Amount ($)",type:"number",value:m,onChange:e=>h(e.target.value),placeholder:"0.00"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[r.jsx(n.Z,{onClick:()=>k("add"),disabled:j,className:"bg-green-600 hover:bg-green-500",children:"+ Deposit"}),r.jsx(n.Z,{onClick:()=>k("subtract"),disabled:j,className:"bg-red-600 hover:bg-red-500",children:"- Withdraw"})]})]}),"message"===u&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Send Notification"}),r.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear in the user's dashboard."}),(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[r.jsx(i.Z,{label:"Title / Subject",value:p,onChange:e=>b(e.target.value),placeholder:"e.g. Deposit Confirmation"}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 block mb-2",children:"Message Body"}),r.jsx("textarea",{className:"w-full bg-[#0B0E14] border border-white/10 rounded-lg p-3 text-white text-sm focus:outline-none focus:border-blue-500 min-h-[120px]",value:g,onChange:e=>f(e.target.value),placeholder:"Type your message here..."})]}),r.jsx(n.Z,{type:"submit",disabled:j,className:"w-full bg-blue-600 hover:bg-blue-500",children:j?"Sending...":"Send Message"})]})]})]})]})})]})}},9837:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(326),a=s(1135);function l({className:e,variant:t="primary",loading:s,disabled:l,children:n,...i}){return r.jsx("button",{disabled:s||l,className:(0,a.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===t&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===t&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===t&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===t&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(s||l)&&"opacity-50 cursor-not-allowed",e),...i,children:s?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):n})}},5329:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(326);s(7577);var a=s(1135);let l=({children:e,className:t})=>r.jsx("div",{className:(0,a.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",t),children:e})},9175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(326);function a({label:e,className:t="",...s}){return(0,r.jsxs)("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-gray-400 ml-1",children:e}),r.jsx("input",{className:`w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ${t}`,...s})]})}},7459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\src\app\admin\users\page.tsx#default`)},1135:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=function(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,6779,8282],()=>s(1267));module.exports=r})();