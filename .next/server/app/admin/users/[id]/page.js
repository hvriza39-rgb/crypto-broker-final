(()=>{var e={};e.id=214,e.ids=[214],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8850:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c}),s(5450),s(9457),s(2029),s(2523);var t=s(3191),n=s(8716),r=s(7922),l=s.n(r),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(a,d);let c=["",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5450)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\[id]\\page.tsx"],u="/admin/users/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},364:(e,a,s)=>{Promise.resolve().then(s.bind(s,687))},687:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(326),n=s(7577),r=s(5047),l=s(5329),i=s(9175),d=s(2102),c=s(9837),o=s(4037),u=s(8676);function p(){let{id:e}=(0,r.useParams)(),a=(0,r.useRouter)(),[s,p]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0),[x,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),[g,f]=(0,n.useState)(null),[y,w]=(0,n.useState)(!1),[N,C]=(0,n.useState)("add"),[k,S]=(0,n.useState)(""),[P,Z]=(0,n.useState)(!1);function _(e,a){p(s=>s?{...s,[e]:a}:s)}async function U(){if(s){b(!0),j(null),f(null);try{let a=await fetch(`/api/admin/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:s.fullName,email:s.email,phone:s.phone,country:s.country,accountStatus:s.accountStatus,kycStatus:s.kycStatus})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"Update failed")}let t=await a.json();p(t.user),j("User updated")}catch(e){f(e?.message||"Update failed")}finally{b(!1)}}}async function A(){j(null),f(null);try{let a=await fetch(`/api/admin/users/${e}/reset-password`,{method:"POST"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"Reset failed")}j("Password reset initiated")}catch(e){f(e?.message||"Reset failed")}}async function D(){if(!s)return;let a=parseFloat(k);if(!Number.isFinite(a)||a<=0){f("Please enter a valid amount");return}Z(!0),j(null),f(null);try{let s=await fetch(`/api/admin/users/${e}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:N,amount:a})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Balance update failed")}let t=await s.json();p(t.user),j(`Balance ${"add"===N?"added":"subtracted"} successfully`),w(!1),S("")}catch(e){f(e?.message||"Balance update failed")}finally{Z(!1)}}return m?t.jsx("div",{className:"text-muted",children:"Loading..."}):g?t.jsx(o.Z,{variant:"error",children:g}):s?(0,t.jsxs)("div",{className:"space-y-4",children:[v&&t.jsx(o.Z,{variant:"success",children:v}),g&&t.jsx(o.Z,{variant:"error",children:g}),(0,t.jsxs)(l.Z,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["User: ",s.fullName]}),t.jsx(c.Z,{variant:"secondary",onClick:()=>a.back(),children:"Back"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(i.Z,{label:"Full name",value:s.fullName,onChange:e=>_("fullName",e.target.value)}),t.jsx(i.Z,{label:"Email",value:s.email,onChange:e=>_("email",e.target.value)}),t.jsx(i.Z,{label:"Phone",value:s.phone||"",onChange:e=>_("phone",e.target.value)}),t.jsx(i.Z,{label:"Country",value:s.country||"",onChange:e=>_("country",e.target.value)}),(0,t.jsxs)(d.Z,{label:"Account status",value:s.accountStatus,onChange:e=>_("accountStatus",e.target.value),children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"suspended",children:"Suspended"}),t.jsx("option",{value:"closed",children:"Closed"})]}),(0,t.jsxs)(d.Z,{label:"KYC status",value:s.kycStatus,onChange:e=>_("kycStatus",e.target.value),children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"verified",children:"Verified"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx(i.Z,{label:"Balance",value:`$${s.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,readOnly:!0})}),t.jsx("div",{className:"mb-[2px]",children:t.jsx(c.Z,{onClick:()=>w(!0),children:"Adjust"})})]}),t.jsx(i.Z,{label:"Created at",value:new Date(s.createdAt).toLocaleString(),readOnly:!0})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.jsx(c.Z,{onClick:U,loading:x,disabled:x,children:x?"Saving...":"Save changes"}),t.jsx(c.Z,{variant:"danger",onClick:A,children:"Reset password"})]})]}),t.jsx(u.Z,{open:y,title:"Adjust User Balance",onClose:()=>{w(!1),S("")},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted",children:["Current balance:"," ",(0,t.jsxs)("span",{className:"font-semibold text-text",children:["$",s.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)(d.Z,{label:"Operation",value:N,onChange:e=>C(e.target.value),children:[t.jsx("option",{value:"add",children:"Add to balance"}),t.jsx("option",{value:"subtract",children:"Subtract from balance"})]}),t.jsx(i.Z,{label:"Amount ($)",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:k,onChange:e=>S(e.target.value)}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(c.Z,{variant:"secondary",onClick:()=>{w(!1),S("")},children:"Cancel"}),t.jsx(c.Z,{onClick:D,loading:P,disabled:P||!k,children:P?"Processing...":"Update Balance"})]})]})})]}):t.jsx(o.Z,{variant:"error",children:"User not found"})}},8676:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var t=s(326);function n({open:e,onClose:a,title:s,children:n}){return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:a}),t.jsx("div",{className:"absolute inset-0 grid place-items-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-xl bg-surface border border-border shadow-card",children:[s&&t.jsx("div",{className:"px-4 py-3 border-b border-border text-lg",children:s}),t.jsx("div",{className:"p-4 space-y-4",children:n})]})})]}):null}},2102:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var t=s(326);function n({label:e,className:a="",children:s,...n}){return(0,t.jsxs)("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-xs font-medium text-gray-400 ml-1",children:e}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("select",{className:`w-full appearance-none bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ${a}`,...n,children:s}),t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-400",children:t.jsx("svg",{className:"h-4 w-4 fill-current",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]})]})}},5450:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\src\app\admin\users\[id]\page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[9276,6779,7040],()=>s(8850));module.exports=t})();