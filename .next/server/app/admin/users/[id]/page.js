(()=>{var e={};e.id=214,e.ids=[214],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1926:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(6245),s(596),s(1506),s(6560);var t=s(3191),n=s(8716),r=s(7922),l=s.n(r),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(a,d);let o=["",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6245)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\admin\\users\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,596)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,6560)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\not-found.tsx"]}],c=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\admin\\users\\[id]\\page.tsx"],u="/admin/users/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2143:(e,a,s)=>{Promise.resolve().then(s.bind(s,6889))},6889:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var t=s(326),n=s(7577),r=s(5047),l=s(5329),i=s(9175),d=s(2102),o=s(9837),c=s(4037),u=s(8676);function p(){let{id:e}=(0,r.useParams)(),a=(0,r.useRouter)(),[s,p]=(0,n.useState)(null),[m,x]=(0,n.useState)(!0),[h,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[j,f]=(0,n.useState)(null),[y,w]=(0,n.useState)(!1),[k,N]=(0,n.useState)("add"),[C,S]=(0,n.useState)(""),[P,Z]=(0,n.useState)(!1);function _(e,a){p(s=>s?{...s,[e]:a}:s)}async function U(){if(s){b(!0),v(null),f(null);try{let a=await fetch(`/api/admin/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:s.fullName,email:s.email,phone:s.phone,country:s.country,accountStatus:s.accountStatus,kycStatus:s.kycStatus})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"Update failed")}let t=await a.json();p(t.user),v("User updated")}catch(e){f(e?.message||"Update failed")}finally{b(!1)}}}async function A(){v(null),f(null);try{let a=await fetch(`/api/admin/users/${e}/reset-password`,{method:"POST"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"Reset failed")}v("Password reset initiated")}catch(e){f(e?.message||"Reset failed")}}async function D(){if(!s)return;let a=parseFloat(C);if(!Number.isFinite(a)||a<=0){f("Please enter a valid amount");return}Z(!0),v(null),f(null);try{let s=await fetch(`/api/admin/users/${e}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:k,amount:a})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error||"Balance update failed")}let t=await s.json();p(t.user),v(`Balance ${"add"===k?"added":"subtracted"} successfully`),w(!1),S("")}catch(e){f(e?.message||"Balance update failed")}finally{Z(!1)}}return m?t.jsx("div",{className:"text-muted",children:"Loading..."}):j?t.jsx(c.Z,{variant:"error",children:j}):s?(0,t.jsxs)("div",{className:"space-y-4",children:[g&&t.jsx(c.Z,{variant:"success",children:g}),j&&t.jsx(c.Z,{variant:"error",children:j}),(0,t.jsxs)(l.Z,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["User: ",s.fullName]}),t.jsx(o.Z,{variant:"secondary",onClick:()=>a.back(),children:"Back"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(i.Z,{label:"Full name",value:s.fullName,onChange:e=>_("fullName",e.target.value)}),t.jsx(i.Z,{label:"Email",value:s.email,onChange:e=>_("email",e.target.value)}),t.jsx(i.Z,{label:"Phone",value:s.phone||"",onChange:e=>_("phone",e.target.value)}),t.jsx(i.Z,{label:"Country",value:s.country||"",onChange:e=>_("country",e.target.value)}),(0,t.jsxs)(d.Z,{label:"Account status",value:s.accountStatus,onChange:e=>_("accountStatus",e.target.value),children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"suspended",children:"Suspended"}),t.jsx("option",{value:"closed",children:"Closed"})]}),(0,t.jsxs)(d.Z,{label:"KYC status",value:s.kycStatus,onChange:e=>_("kycStatus",e.target.value),children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"verified",children:"Verified"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm mb-1 text-muted",children:"Balance"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(i.Z,{value:`$${s.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,readOnly:!0,className:"flex-1"}),t.jsx(o.Z,{onClick:()=>w(!0),children:"Adjust"})]})]}),t.jsx(i.Z,{label:"Created at",value:new Date(s.createdAt).toLocaleString(),readOnly:!0})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.jsx(o.Z,{onClick:U,loading:h,disabled:h,children:h?"Saving...":"Save changes"}),t.jsx(o.Z,{variant:"danger",onClick:A,children:"Reset password"})]})]}),t.jsx(u.Z,{open:y,title:"Adjust User Balance",onClose:()=>{w(!1),S("")},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted",children:["Current balance:"," ",(0,t.jsxs)("span",{className:"font-semibold text-text",children:["$",s.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)(d.Z,{label:"Operation",value:k,onChange:e=>N(e.target.value),children:[t.jsx("option",{value:"add",children:"Add to balance"}),t.jsx("option",{value:"subtract",children:"Subtract from balance"})]}),t.jsx(i.Z,{label:"Amount ($)",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:C,onChange:e=>S(e.target.value)}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.Z,{variant:"secondary",onClick:()=>{w(!1),S("")},children:"Cancel"}),t.jsx(o.Z,{onClick:D,loading:P,disabled:P||!C,children:P?"Processing...":"Update Balance"})]})]})})]}):t.jsx(c.Z,{variant:"error",children:"User not found"})}},8676:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var t=s(326);function n({open:e,onClose:a,title:s,children:n}){return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:a}),t.jsx("div",{className:"absolute inset-0 grid place-items-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-xl bg-surface border border-border shadow-card",children:[s&&t.jsx("div",{className:"px-4 py-3 border-b border-border text-lg",children:s}),t.jsx("div",{className:"p-4 space-y-4",children:n})]})})]}):null}},2102:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(326),n=s(1135);function r({className:e,label:a,hint:s,children:r,...l}){return(0,t.jsxs)("label",{className:"block space-y-2",children:[a&&t.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 ml-1",children:a}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("select",{className:(0,n.Z)("w-full appearance-none rounded-lg bg-[#111827] border border-white/10 px-4 py-3 text-white transition-all duration-200","focus:bg-[#1f2937] focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/10 outline-none","placeholder:text-gray-600 text-sm md:text-base",e),...l,children:r}),t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500",children:t.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]}),s&&t.jsx("span",{className:"text-xs text-gray-500 italic px-1",children:s})]})}},6245:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\app\admin\users\[id]\page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[9276,6779,2465],()=>s(1926));module.exports=t})();