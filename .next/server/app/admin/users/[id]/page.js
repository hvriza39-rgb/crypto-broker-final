(()=>{var e={};e.id=214,e.ids=[214],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8850:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(5450),a(9457),a(6666),a(2029),a(2523);var t=a(3191),s=a(8716),n=a(7922),i=a.n(n),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(r,o);let d=["",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5450)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9457)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,6666)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,2523)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\src\\app\\admin\\users\\[id]\\page.tsx"],u="/admin/users/[id]/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},364:(e,r,a)=>{Promise.resolve().then(a.bind(a,687))},2881:(e,r,a)=>{"use strict";a.d(r,{Z:()=>u});var t=a(7577);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),i=e=>{let r=n(e);return r.charAt(0).toUpperCase()+r.slice(1)},l=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim(),o=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:c,...u},h)=>(0,t.createElement)("svg",{ref:h,...d,width:r,height:r,stroke:e,strokeWidth:s?24*Number(a)/Number(r):a,className:l("lucide",n),...!i&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(i)?i:[i]])),u=(e,r)=>{let a=(0,t.forwardRef)(({className:a,...n},o)=>(0,t.createElement)(c,{ref:o,iconNode:r,className:l(`lucide-${s(i(e))}`,`lucide-${e}`,a),...n}));return a.displayName=i(e),a}},434:(e,r,a)=>{"use strict";a.d(r,{default:()=>s.a});var t=a(9404),s=a.n(t)},5047:(e,r,a)=>{"use strict";var t=a(7389);a.o(t,"useParams")&&a.d(r,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},687:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>h});var t=a(326),s=a(7577),n=a(5047),i=a(5329),l=a(9175),o=a(2102),d=a(9837),c=a(4037),u=a(8676);function h(){let{id:e}=(0,n.useParams)(),r=(0,n.useRouter)(),[a,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(!0),[x,b]=(0,s.useState)(!1),[g,f]=(0,s.useState)(null),[v,j]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[N,C]=(0,s.useState)("add"),[k,P]=(0,s.useState)(""),[Z,S]=(0,s.useState)(!1);function A(e,r){h(a=>a?{...a,[e]:r}:a)}async function U(){if(a){b(!0),f(null),j(null);try{let r=await fetch(`/api/admin/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:a.fullName,email:a.email,phone:a.phone,country:a.country,accountStatus:a.accountStatus,kycStatus:a.kycStatus})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e?.error||"Update failed")}let t=await r.json();h(t.user),f("User updated")}catch(e){j(e?.message||"Update failed")}finally{b(!1)}}}async function _(){f(null),j(null);try{let r=await fetch(`/api/admin/users/${e}/reset-password`,{method:"POST"});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e?.error||"Reset failed")}f("Password reset initiated")}catch(e){j(e?.message||"Reset failed")}}async function $(){if(!a)return;let r=parseFloat(k);if(!Number.isFinite(r)||r<=0){j("Please enter a valid amount");return}S(!0),f(null),j(null);try{let a=await fetch(`/api/admin/users/${e}/balance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:N,amount:r})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"Balance update failed")}let t=await a.json();h(t.user),f(`Balance ${"add"===N?"added":"subtracted"} successfully`),w(!1),P("")}catch(e){j(e?.message||"Balance update failed")}finally{S(!1)}}return m?t.jsx("div",{className:"text-muted",children:"Loading..."}):v?t.jsx(c.Z,{variant:"error",children:v}):a?(0,t.jsxs)("div",{className:"space-y-4",children:[g&&t.jsx(c.Z,{variant:"success",children:g}),v&&t.jsx(c.Z,{variant:"error",children:v}),(0,t.jsxs)(i.Z,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["User: ",a.fullName]}),t.jsx(d.Z,{variant:"secondary",onClick:()=>r.back(),children:"Back"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(l.Z,{label:"Full name",value:a.fullName,onChange:e=>A("fullName",e.target.value)}),t.jsx(l.Z,{label:"Email",value:a.email,onChange:e=>A("email",e.target.value)}),t.jsx(l.Z,{label:"Phone",value:a.phone||"",onChange:e=>A("phone",e.target.value)}),t.jsx(l.Z,{label:"Country",value:a.country||"",onChange:e=>A("country",e.target.value)}),(0,t.jsxs)(o.Z,{label:"Account status",value:a.accountStatus,onChange:e=>A("accountStatus",e.target.value),children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"suspended",children:"Suspended"}),t.jsx("option",{value:"closed",children:"Closed"})]}),(0,t.jsxs)(o.Z,{label:"KYC status",value:a.kycStatus,onChange:e=>A("kycStatus",e.target.value),children:[t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"verified",children:"Verified"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx(l.Z,{label:"Balance",value:`$${a.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,readOnly:!0})}),t.jsx("div",{className:"mb-[2px]",children:t.jsx(d.Z,{onClick:()=>w(!0),children:"Adjust"})})]}),t.jsx(l.Z,{label:"Created at",value:new Date(a.createdAt).toLocaleString(),readOnly:!0})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t.jsx(d.Z,{onClick:U,loading:x,disabled:x,children:x?"Saving...":"Save changes"}),t.jsx(d.Z,{variant:"danger",onClick:_,children:"Reset password"})]})]}),t.jsx(u.Z,{open:y,title:"Adjust User Balance",onClose:()=>{w(!1),P("")},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted",children:["Current balance:"," ",(0,t.jsxs)("span",{className:"font-semibold text-text",children:["$",a.balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,t.jsxs)(o.Z,{label:"Operation",value:N,onChange:e=>C(e.target.value),children:[t.jsx("option",{value:"add",children:"Add to balance"}),t.jsx("option",{value:"subtract",children:"Subtract from balance"})]}),t.jsx(l.Z,{label:"Amount ($)",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:k,onChange:e=>P(e.target.value)}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(d.Z,{variant:"secondary",onClick:()=>{w(!1),P("")},children:"Cancel"}),t.jsx(d.Z,{onClick:$,loading:Z,disabled:Z||!k,children:Z?"Processing...":"Update Balance"})]})]})})]}):t.jsx(c.Z,{variant:"error",children:"User not found"})}},9837:(e,r,a)=>{"use strict";a.d(r,{Z:()=>n});var t=a(326),s=a(1135);function n({className:e,variant:r="primary",loading:a,disabled:n,children:i,...l}){return t.jsx("button",{disabled:a||n,className:(0,s.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===r&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===r&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===r&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===r&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(a||n)&&"opacity-50 cursor-not-allowed",e),...l,children:a?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):i})}},5329:(e,r,a)=>{"use strict";a.d(r,{Z:()=>n});var t=a(326);a(7577);var s=a(1135);let n=({children:e,className:r})=>t.jsx("div",{className:(0,s.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",r),children:e})},4037:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});var t=a(326);function s({variant:e="info",children:r}){return t.jsx("div",{className:`px-4 py-3 rounded-lg border text-sm ${{success:"bg-green-500/10 text-green-400 border-green-500/20",error:"bg-red-500/10 text-red-400 border-red-500/20",warning:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20"}[e]}`,children:r})}},9175:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});var t=a(326);function s({label:e,className:r="",...a}){return(0,t.jsxs)("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-xs font-medium text-gray-400 ml-1",children:e}),t.jsx("input",{className:`w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ${r}`,...a})]})}},8676:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});var t=a(326);function s({open:e,onClose:r,title:a,children:s}){return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:r}),t.jsx("div",{className:"absolute inset-0 grid place-items-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-xl bg-surface border border-border shadow-card",children:[a&&t.jsx("div",{className:"px-4 py-3 border-b border-border text-lg",children:a}),t.jsx("div",{className:"p-4 space-y-4",children:s})]})})]}):null}},2102:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});var t=a(326);function s({label:e,className:r="",children:a,...s}){return(0,t.jsxs)("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-xs font-medium text-gray-400 ml-1",children:e}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("select",{className:`w-full appearance-none bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ${r}`,...s,children:a}),t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-400",children:t.jsx("svg",{className:"h-4 w-4 fill-current",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]})]})}},5450:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\src\app\admin\users\[id]\page.tsx#default`)},1135:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=function(){for(var e,r,a=0,t="",s=arguments.length;a<s;a++)(e=arguments[a])&&(r=function e(r){var a,t,s="";if("string"==typeof r||"number"==typeof r)s+=r;else if("object"==typeof r){if(Array.isArray(r)){var n=r.length;for(a=0;a<n;a++)r[a]&&(t=e(r[a]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t)}return s}(e))&&(t&&(t+=" "),t+=r);return t}}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[9276,6779,8282],()=>a(8850));module.exports=t})();