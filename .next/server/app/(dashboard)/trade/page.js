(()=>{var e={};e.id=849,e.ids=[849],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3652:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>i}),a(7007),a(8032),a(1506),a(6560);var r=a(3191),s=a(8716),o=a(7922),l=a.n(o),n=a(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let i=["",{children:["(dashboard)",{children:["trade",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7007)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\(dashboard)\\trade\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8032)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\(dashboard)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,6560)),"C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\not-found.tsx"]}],c=["C:\\Users\\user\\Documents\\web-upload\\crypto-broker-dashboard-with-admin-connected-backend\\app\\(dashboard)\\trade\\page.tsx"],x="/(dashboard)/trade/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/trade/page",pathname:"/trade",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},7066:(e,t,a)=>{Promise.resolve().then(a.bind(a,7151))},7151:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(326),s=a(7577),o=a(6671),l=a(7506);let n=(0,a(2881).Z)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var d=a(381);function i(){let[e,t]=(0,s.useState)("BTCUSD"),[a,i]=(0,s.useState)(0),[c,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(0),[u,b]=(0,s.useState)(!1),[p,f]=(0,s.useState)("BUY"),[g,w]=(0,s.useState)([]),[v,j]=(0,s.useState)([]),y=async()=>{let e=localStorage.getItem("token");if(e)try{let t=await fetch("/api/user/dashboard",{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();a.balances&&h(a.balances.available)}catch(e){console.error(e)}},N=async()=>{if(!c||0>=Number(c)){d.Am.error("Enter a valid amount");return}if("BUY"===p&&Number(c)>m){d.Am.error("Insufficient USD Balance");return}b(!0);let t=localStorage.getItem("token");try{let r=await fetch("/api/transaction/trade",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:p,asset:e.replace("USD",""),amount:Number(c),price:a})}),s=await r.json();if(!r.ok)throw Error(s.error||"Trade Failed");d.Am.success(`${p} Order Filled!`,{icon:"BUY"===p?"\uD83D\uDE80":"\uD83D\uDCB0",style:{background:"#1a1f2e",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}}),x(""),y()}catch(e){d.Am.error(e.message)}finally{b(!1)}},k=e=>{"BUY"===p?x((m*e).toFixed(2)):(0,d.Am)("For SELL, amount logic would go here")};return(0,r.jsxs)("div",{className:"h-[calc(100vh-80px)] p-4 flex flex-col lg:flex-row gap-4 text-white overflow-hidden",children:[r.jsx(d.x7,{position:"bottom-right"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-4 min-w-0",children:[r.jsx("div",{className:"bg-[#1a1f2e] border border-white/10 p-4 rounded-xl flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("h2",{className:"text-xl font-bold flex items-center gap-2",children:e}),r.jsx("span",{className:"text-xs text-blue-400 font-mono",children:"Perpetual Contract"})]}),r.jsx("div",{className:"h-8 w-px bg-white/10 mx-2 hidden md:block"}),r.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:a>0?`$${a.toLocaleString(void 0,{minimumFractionDigits:2})}`:"Loading..."})]})}),r.jsx("div",{className:"flex-1 bg-[#1a1f2e] border border-white/10 rounded-xl overflow-hidden relative shadow-2xl",children:r.jsx("iframe",{src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_76d87&symbol=${e}&interval=15&hidesidetoolbar=1&hidetoptoolbar=0&symboledit=1&saveimage=1&toolbarbg=f1f3f6&studies=[]&theme=dark&style=1&timezone=Etc%2FUTC&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=[]&locale=en&utm_source=localhost&utm_medium=widget&utm_campaign=chart&utm_term=${e}`,className:"w-full h-full border-0 absolute inset-0",allowTransparency:!0,scrolling:"no"})})]}),(0,r.jsxs)("div",{className:"w-full lg:w-[320px] flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 rounded-xl p-5 shadow-xl",children:[(0,r.jsxs)("div",{className:"flex bg-[#0b1220] p-1 rounded-lg mb-6",children:[r.jsx("button",{onClick:()=>f("BUY"),className:`flex-1 py-2 rounded-md text-sm font-bold transition-all ${"BUY"===p?"bg-green-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"BUY"}),r.jsx("button",{onClick:()=>f("SELL"),className:`flex-1 py-2 rounded-md text-sm font-bold transition-all ${"SELL"===p?"bg-red-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"SELL"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-2",children:[(0,r.jsxs)("span",{className:"text-gray-500 flex items-center gap-1",children:[r.jsx(o.Z,{size:12})," Avail. Balance"]}),(0,r.jsxs)("span",{className:"text-white font-mono",children:["$",m.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-[#0b1220] border border-white/10 rounded-lg p-3 mb-4 flex items-center justify-between focus-within:border-blue-500 transition-colors",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"Amount"}),r.jsx("input",{type:"number",value:c,onChange:e=>x(e.target.value),className:"bg-transparent text-right text-white font-mono outline-none w-24",placeholder:"0.00"}),r.jsx("span",{className:"text-gray-400 text-xs ml-2",children:"USD"})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[.25,.5,.75,1].map(e=>(0,r.jsxs)("button",{onClick:()=>k(e),className:"bg-[#0b1220] hover:bg-white/10 text-gray-400 hover:text-white text-[10px] py-1 rounded border border-white/5 transition-colors",children:[100*e,"%"]},e))}),r.jsx("button",{onClick:N,disabled:u||0===a,className:`w-full py-3.5 rounded-xl font-bold text-white transition-all shadow-lg active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed ${"BUY"===p?"bg-green-600 hover:bg-green-500 shadow-green-900/20":"bg-red-600 hover:bg-red-500 shadow-red-900/20"}`,children:u?r.jsx(l.Z,{className:"animate-spin mx-auto"}):`${p} BTC`})]}),(0,r.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 rounded-xl p-4 flex-1 shadow-xl overflow-hidden flex flex-col",children:[(0,r.jsxs)("h3",{className:"text-xs font-bold text-gray-400 mb-3 flex justify-between",children:[r.jsx("span",{children:"Price (USD)"}),r.jsx("span",{children:"Amount (BTC)"})]}),r.jsx("div",{className:"flex-1 flex flex-col justify-end gap-1 mb-2 overflow-hidden",children:v.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-xs font-mono relative",children:[r.jsx("span",{className:"text-red-400 relative z-10",children:e.price}),r.jsx("span",{className:"text-gray-300 relative z-10",children:e.amount}),r.jsx("div",{className:"absolute right-0 top-0 bottom-0 bg-red-500/10",style:{width:`${80*Math.random()}%`}})]},t))}),(0,r.jsxs)("div",{className:"text-center py-2 text-lg font-mono font-bold border-y border-white/5 my-1 text-white",children:[a>0?a.toFixed(2):"---"," ",r.jsx(n,{size:14,className:"inline text-green-500"})]}),r.jsx("div",{className:"flex-1 flex flex-col justify-start gap-1 mt-2 overflow-hidden",children:g.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-xs font-mono relative",children:[r.jsx("span",{className:"text-green-400 relative z-10",children:e.price}),r.jsx("span",{className:"text-gray-300 relative z-10",children:e.amount}),r.jsx("div",{className:"absolute right-0 top-0 bottom-0 bg-green-500/10",style:{width:`${80*Math.random()}%`}})]},t))})]})]})]})}},7506:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7007:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\user\Documents\web-upload\crypto-broker-dashboard-with-admin-connected-backend\app\(dashboard)\trade\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[9276,6779,8296,345],()=>a(3652));module.exports=r})();