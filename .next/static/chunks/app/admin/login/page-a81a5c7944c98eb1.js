(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{1615:function(e,r,t){Promise.resolve().then(t.bind(t,3849))},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},3849:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var n=t(7437),s=t(9376),o=t(2265),a=t(6334),i=t(757),l=t(2827),u=t(9680);function c(){(0,s.useRouter)(),(0,s.useSearchParams)().get("redirect");let[e,r]=(0,o.useState)(""),[t,c]=(0,o.useState)(""),[d,f]=(0,o.useState)(!1),[h,m]=(0,o.useState)(null);async function g(r){r.preventDefault(),f(!0),m(null);try{var n;let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await r.json().catch(()=>({}));if(!r.ok)throw Error((null==s?void 0:s.error)||"Login failed");if(!s.token)throw Error("Server error: No token received.");document.cookie="token=".concat(s.token,"; path=/; max-age=86400; SameSite=Lax"),localStorage.setItem("token",s.token);let o=(null===(n=s.user)||void 0===n?void 0:n.role)==="admin"?"/admin/users":"/dashboard";window.location.href=o}catch(e){m((null==e?void 0:e.message)||"Login failed")}finally{f(!1)}}return(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsx)(i.Z,{className:"p-6",children:(0,n.jsxs)("form",{onSubmit:g,className:"space-y-4",autoComplete:"off",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"Admin Login"}),(0,n.jsx)("p",{className:"text-sm text-muted mt-1",children:"Sign in to manage users and transactions."})]}),h&&(0,n.jsx)(u.Z,{variant:"error",children:h}),(0,n.jsx)(l.Z,{label:"Email",value:e,onChange:e=>r(e.target.value),autoComplete:"email"}),(0,n.jsx)(l.Z,{label:"Password",type:"password",value:t,onChange:e=>c(e.target.value),autoComplete:"current-password"}),(0,n.jsx)(a.Z,{type:"submit",className:"w-full",loading:d,disabled:d,children:d?"Signing in...":"Sign in"})]})})})}function d(){return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-bg p-4",children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{className:"text-white",children:"Loading login..."}),children:(0,n.jsx)(c,{})})})}},6334:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(7437),s=t(1994);function o(e){let{className:r,variant:t="primary",loading:o,disabled:a,children:i,...l}=e;return(0,n.jsx)("button",{disabled:o||a,className:(0,s.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===t&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===t&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===t&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===t&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(o||a)&&"opacity-50 cursor-not-allowed",r),...l,children:o?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):i})}},757:function(e,r,t){"use strict";var n=t(7437);t(2265);var s=t(1994);r.Z=e=>{let{children:r,className:t}=e;return(0,n.jsx)("div",{className:(0,s.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",t),children:r})}},9680:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(7437);function s(e){let{variant:r="info",children:t}=e;return(0,n.jsx)("div",{className:"px-4 py-3 rounded-lg border text-sm ".concat({success:"bg-green-500/10 text-green-400 border-green-500/20",error:"bg-red-500/10 text-red-400 border-red-500/20",warning:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",info:"bg-blue-500/10 text-blue-400 border-blue-500/20"}[r]),children:t})}},2827:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(7437);function s(e){let{label:r,className:t="",...s}=e;return(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)("label",{className:"text-xs font-medium text-gray-400 ml-1",children:r}),(0,n.jsx)("input",{className:"w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ".concat(t),...s})]})}},1994:function(e,r,t){"use strict";r.Z=function(){for(var e,r,t=0,n="",s=arguments.length;t<s;t++)(e=arguments[t])&&(r=function e(r){var t,n,s="";if("string"==typeof r||"number"==typeof r)s+=r;else if("object"==typeof r){if(Array.isArray(r)){var o=r.length;for(t=0;t<o;t++)r[t]&&(n=e(r[t]))&&(s&&(s+=" "),s+=n)}else for(n in r)r[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=r);return n}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1615)}),_N_E=e.O()}]);