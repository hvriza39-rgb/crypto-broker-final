(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{3374:function(e,t,s){Promise.resolve().then(s.bind(s,8606))},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8606:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),n=s(2265),l=s(9205);let r=(0,l.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var i=s(401),o=s(2489);let d=(0,l.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var c=s(9064);function h(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[h,x]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),[b,g]=(0,n.useState)(null),j=async()=>{l(!0);try{let e=await fetch("/api/admin/deposits"),s=await e.json();t(s)}catch(e){console.error(e),c.Am.error("Failed to load deposits")}finally{l(!1)}};(0,n.useEffect)(()=>{j()},[]);let v=(e,t)=>{f(e),g(t),u(!0)},w=async()=>{if(!m||!b)return;x(m);let e=c.Am.loading("Processing ".concat(b,"..."));u(!1);try{let t=await fetch("/api/admin/deposits",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:m,action:b})}),s=await t.json();t.ok?(c.Am.success("Deposit ".concat(b,"d successfully!"),{id:e}),j()):c.Am.error(s.error||"Action failed",{id:e})}catch(t){c.Am.error("Connection error",{id:e})}finally{x(null),f(null),g(null)}};return(0,a.jsxs)("div",{className:"p-6 relative",children:[(0,a.jsx)(c.x7,{position:"bottom-right",toastOptions:{style:{background:"#1a1f2e",color:"#fff",border:"1px solid rgba(255,255,255,0.1)"}}}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Transaction Management"}),(0,a.jsx)("button",{onClick:j,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 text-white transition-colors",children:(0,a.jsx)(r,{size:20})})]}),(0,a.jsx)("div",{className:"bg-[#1a1f2e] border border-white/10 rounded-2xl shadow-xl overflow-hidden",children:s?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading requests..."}):0===e.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No pending deposits found."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-white/5 text-gray-400 text-xs uppercase",children:[(0,a.jsx)("th",{className:"p-4",children:"User"}),(0,a.jsx)("th",{className:"p-4",children:"Asset"}),(0,a.jsx)("th",{className:"p-4",children:"Amount"}),(0,a.jsx)("th",{className:"p-4",children:"Proof / TxID"}),(0,a.jsx)("th",{className:"p-4",children:"Date"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/5 text-white",children:e.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,a.jsxs)("td",{className:"p-4",children:[(0,a.jsx)("div",{className:"font-bold",children:(null===(t=e.user)||void 0===t?void 0:t.name)||"Unknown"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:null===(s=e.user)||void 0===s?void 0:s.email})]}),(0,a.jsxs)("td",{className:"p-4",children:[(0,a.jsx)("span",{className:"bg-blue-500/10 text-blue-400 px-2 py-1 rounded text-xs font-bold",children:e.asset}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:e.network})]}),(0,a.jsxs)("td",{className:"p-4 font-mono font-bold text-lg text-green-400",children:["$",e.amount.toLocaleString()]}),(0,a.jsx)("td",{className:"p-4 max-w-[150px] truncate text-xs text-gray-400 font-mono",title:e.proof,children:e.proof||"N/A"}),(0,a.jsx)("td",{className:"p-4 text-sm text-gray-400",children:e.date}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>v(e._id,"approve"),disabled:!!h,className:"bg-green-600 hover:bg-green-500 text-white p-2 rounded-lg transition-colors shadow-lg shadow-green-900/20 disabled:opacity-50",children:(0,a.jsx)(i.Z,{size:18})}),(0,a.jsx)("button",{onClick:()=>v(e._id,"reject"),disabled:!!h,className:"bg-red-600 hover:bg-red-500 text-white p-2 rounded-lg transition-colors shadow-lg shadow-red-900/20 disabled:opacity-50",children:(0,a.jsx)(o.Z,{size:18})})]})})]},e._id)})})]})})}),p&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,a.jsx)("div",{className:"bg-[#1a1f2e] border border-white/10 p-6 rounded-2xl shadow-2xl max-w-sm w-full transform scale-100 transition-all",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"p-4 rounded-full mb-4 ".concat("approve"===b?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:"approve"===b?(0,a.jsx)(i.Z,{size:32}):(0,a.jsx)(d,{size:32})}),(0,a.jsxs)("h3",{className:"text-xl font-bold text-white mb-2 capitalize",children:[b," Transaction?"]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm mb-6",children:["Are you sure you want to ",(0,a.jsx)("strong",{children:b})," this deposit?","approve"===b?" This will add funds to the user's balance.":" This will mark the transaction as rejected."]}),(0,a.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,a.jsx)("button",{onClick:()=>u(!1),className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-medium transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{onClick:w,className:"flex-1 py-3 rounded-xl font-bold text-white shadow-lg transition-all ".concat("approve"===b?"bg-green-600 hover:bg-green-500 shadow-green-900/20":"bg-red-600 hover:bg-red-500 shadow-red-900/20"),children:["Confirm ","approve"===b?"Approve":"Reject"]})]})]})})})]})}}},function(e){e.O(0,[765,971,117,744],function(){return e(e.s=3374)}),_N_E=e.O()}]);