(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{12:function(e,t,s){Promise.resolve().then(s.bind(s,3058))},3058:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),l=s(2265),r=s(757),n=s(6334),i=s(2827);function c(){var e,t;let[s,c]=(0,l.useState)([]),[o,d]=(0,l.useState)(!0),[x,u]=(0,l.useState)(null),[h,m]=(0,l.useState)("details"),[g,b]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[N,v]=(0,l.useState)(null),[w,S]=(0,l.useState)(!1);async function C(){try{let e=await fetch("/api/admin/users"),t=await e.json(),s=Array.isArray(t)?t:t.users||[];c(s)}catch(e){console.error("Failed to fetch users:",e)}finally{d(!1)}}async function k(e){if(x&&g){S(!0),v(null);try{if(!(await fetch("/api/admin/users/".concat(x.id,"/balance"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:e,amount:parseFloat(g)})})).ok)throw Error("Update failed");v({type:"success",text:"Successfully ".concat("add"===e?"added":"deducted"," $").concat(g)}),b(""),C()}catch(e){v({type:"error",text:"Failed to update balance"})}finally{S(!1)}}}async function Z(e){if(e.preventDefault(),x&&j){S(!0);try{if(!(await fetch("/api/admin/users/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:x.id,title:f,message:j})})).ok)throw Error("Failed to send");v({type:"success",text:"Message sent to user dashboard."}),p(""),y("")}catch(e){v({type:"error",text:"Could not send message."})}finally{S(!1)}}}return((0,l.useEffect)(()=>{C()},[]),(0,l.useEffect)(()=>{if(N){let e=setTimeout(()=>v(null),3e3);return()=>clearTimeout(e)}},[N]),o)?(0,a.jsx)("div",{className:"p-6 text-white",children:"Loading users..."}):(0,a.jsxs)("div",{className:"p-6 relative min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"User Management"}),(0,a.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,a.jsxs)(r.Z,{className:"p-4 flex flex-col md:flex-row justify-between items-center gap-4 hover:border-blue-500/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-bold text-white text-lg",children:e.name||"Unnamed"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("admin"===e.role?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"),children:e.role})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.email})]}),(0,a.jsx)(n.Z,{onClick:()=>{u(e),m("details")},className:"bg-gray-700 hover:bg-gray-600",children:"Manage User"})]},e.id))}),x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row h-[500px]",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/3 bg-white/5 p-4 flex flex-col gap-2 border-r border-white/10",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"font-bold text-white truncate",children:x.name}),(0,a.jsx)("p",{className:"text-xs text-gray-400 truncate",children:x.email})]}),(0,a.jsx)("button",{onClick:()=>m("details"),className:"p-3 rounded-lg text-left text-sm font-medium transition-colors ".concat("details"===h?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"),children:"User Details"}),(0,a.jsx)("button",{onClick:()=>m("wallet"),className:"p-3 rounded-lg text-left text-sm font-medium transition-colors ".concat("wallet"===h?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"),children:"Wallet & Balance"}),(0,a.jsx)("button",{onClick:()=>m("message"),className:"p-3 rounded-lg text-left text-sm font-medium transition-colors ".concat("message"===h?"bg-blue-600 text-white":"text-gray-400 hover:bg-white/5"),children:"Send Message"})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 relative bg-[#1a1f2e] overflow-y-auto",children:[(0,a.jsx)("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"âœ•"}),N&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg text-sm font-medium ".concat("success"===N.type?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:N.text}),"details"===h&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Profile Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"User ID"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 font-mono truncate",children:x.id})]}),(0,a.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Role"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 capitalize",children:x.role})]}),(0,a.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg col-span-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Email"}),(0,a.jsx)("p",{className:"text-sm text-gray-300",children:x.email})]}),(0,a.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg col-span-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Current Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["$",(null===(e=x.portfolioBalance)||void 0===e?void 0:e.toLocaleString())||"0.00"]})]})]})]}),"wallet"===h&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Adjust Wallet Balance"}),(0,a.jsxs)("div",{className:"p-4 bg-black/20 rounded-xl mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Current Balance"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",(null===(t=x.portfolioBalance)||void 0===t?void 0:t.toLocaleString())||"0"]})]}),(0,a.jsx)(i.Z,{label:"Amount ($)",type:"number",value:g,onChange:e=>b(e.target.value),placeholder:"0.00"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,a.jsx)(n.Z,{onClick:()=>k("add"),disabled:w,className:"bg-green-600 hover:bg-green-500",children:"+ Deposit"}),(0,a.jsx)(n.Z,{onClick:()=>k("subtract"),disabled:w,className:"bg-red-600 hover:bg-red-500",children:"- Withdraw"})]})]}),"message"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Send Notification"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"This message will appear in the user's dashboard."}),(0,a.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,a.jsx)(i.Z,{label:"Title / Subject",value:f,onChange:e=>p(e.target.value),placeholder:"e.g. Deposit Confirmation"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 block mb-2",children:"Message Body"}),(0,a.jsx)("textarea",{className:"w-full bg-[#0B0E14] border border-white/10 rounded-lg p-3 text-white text-sm focus:outline-none focus:border-blue-500 min-h-[120px]",value:j,onChange:e=>y(e.target.value),placeholder:"Type your message here..."})]}),(0,a.jsx)(n.Z,{type:"submit",disabled:w,className:"w-full bg-blue-600 hover:bg-blue-500",children:w?"Sending...":"Send Message"})]})]})]})]})})]})}},6334:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437),l=s(1994);function r(e){let{className:t,variant:s="primary",loading:r,disabled:n,children:i,...c}=e;return(0,a.jsx)("button",{disabled:r||n,className:(0,l.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===s&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===s&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===s&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===s&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(r||n)&&"opacity-50 cursor-not-allowed",t),...c,children:r?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):i})}},757:function(e,t,s){"use strict";var a=s(7437);s(2265);var l=s(1994);t.Z=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,l.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",s),children:t})}},2827:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);function l(e){let{label:t,className:s="",...l}=e;return(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-400 ml-1",children:t}),(0,a.jsx)("input",{className:"w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ".concat(s),...l})]})}},1994:function(e,t,s){"use strict";t.Z=function(){for(var e,t,s=0,a="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=function e(t){var s,a,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a)}return l}(e))&&(a&&(a+=" "),a+=t);return a}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=12)}),_N_E=e.O()}]);