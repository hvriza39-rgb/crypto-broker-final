(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{12:function(e,t,s){Promise.resolve().then(s.bind(s,3058))},3058:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),a=s(2265),n=s(757),l=s(6334),i=s(2827);function c(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1);async function m(){try{let e=await fetch("/api/admin/users"),s=await e.json(),r=Array.isArray(s)?s:s.users||[];t(r)}catch(e){console.error("Failed to fetch users:",e)}finally{c(!1)}}async function g(e){if(o&&u){f(!0);try{let t=await fetch("/api/admin/users/".concat(o.id,"/balance"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:e,amount:parseFloat(u)})}),s=await t.json();if(!t.ok)throw Error(s.error||"Update failed");alert("Successfully ".concat("add"===e?"added":"deducted"," $").concat(u)),h(""),d(null),m()}catch(e){alert(e.message)}finally{f(!1)}}}return((0,a.useEffect)(()=>{m()},[]),s)?(0,r.jsx)("div",{className:"p-6 text-white",children:"Loading users..."}):(0,r.jsxs)("div",{className:"p-6 relative",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"User Management"}),(0,r.jsx)("div",{className:"grid gap-4",children:e.length>0?e.map(e=>{var t;return(0,r.jsxs)(n.Z,{className:"p-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-bold text-white text-lg",children:e.name||"Unnamed"}),"admin"===e.role&&(0,r.jsx)("span",{className:"bg-purple-500/20 text-purple-400 text-xs px-2 py-0.5 rounded",children:"Admin"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:e.email}),(0,r.jsx)("div",{className:"mt-2 flex items-center gap-4",children:(0,r.jsxs)("p",{className:"text-green-400 font-mono",children:["Bal: $",(null===(t=e.portfolioBalance)||void 0===t?void 0:t.toLocaleString())||"0.00"]})})]}),(0,r.jsx)(l.Z,{onClick:()=>d(e),className:"bg-blue-600 hover:bg-blue-500 text-sm",children:"Manage Balance"})]},e.id||e._id)}):(0,r.jsx)("p",{className:"text-gray-400",children:"No users found."})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-[#1a1f2e] border border-white/10 p-6 rounded-2xl w-full max-w-md shadow-2xl",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Manage Funds"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm mb-6",children:["Updating balance for ",(0,r.jsx)("span",{className:"text-white",children:o.email})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Amount ($)"}),(0,r.jsx)(i.Z,{type:"number",placeholder:"0.00",value:u,onChange:e=>h(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[(0,r.jsx)(l.Z,{onClick:()=>g("add"),disabled:x,className:"bg-green-600 hover:bg-green-500",children:"+ Deposit"}),(0,r.jsx)(l.Z,{onClick:()=>g("subtract"),disabled:x,className:"bg-red-600 hover:bg-red-500",children:"- Withdraw"})]}),(0,r.jsx)(l.Z,{onClick:()=>{d(null),h("")},className:"w-full mt-2 bg-transparent hover:bg-white/5 text-gray-400",children:"Cancel"})]})]})})]})}},6334:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(7437),a=s(1994);function n(e){let{className:t,variant:s="primary",loading:n,disabled:l,children:i,...c}=e;return(0,r.jsx)("button",{disabled:n||l,className:(0,a.Z)("inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#0b1220]","primary"===s&&"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20 focus:ring-blue-500","secondary"===s&&"bg-white/5 hover:bg-white/10 text-white border border-white/10 focus:ring-gray-500","danger"===s&&"bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 focus:ring-red-500","ghost"===s&&"bg-transparent hover:bg-white/5 text-gray-400 hover:text-white",(n||l)&&"opacity-50 cursor-not-allowed",t),...c,children:n?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):i})}},757:function(e,t,s){"use strict";var r=s(7437);s(2265);var a=s(1994);t.Z=e=>{let{children:t,className:s}=e;return(0,r.jsx)("div",{className:(0,a.Z)("bg-surface border border-border rounded-xl shadow-card p-6","transition hover:shadow-lg",s),children:t})}},2827:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(7437);function a(e){let{label:t,className:s="",...a}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-400 ml-1",children:t}),(0,r.jsx)("input",{className:"w-full bg-[#0b1220] border border-white/10 rounded-xl px-4 py-2.5 text-white focus:outline-none focus:border-blue-500 transition-colors ".concat(s),...a})]})}},1994:function(e,t,s){"use strict";t.Z=function(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=12)}),_N_E=e.O()}]);